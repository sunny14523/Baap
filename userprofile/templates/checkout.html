{% extends 'base.html' %}
{% block content %}

<style>
    body {
        background-color: #fdfdfd;
        font-family: 'Helvetica Neue', sans-serif;
    }

    .checkout-container {
        max-width: 600px;
        margin: 40px auto;
        background: #fff;
        border-radius: 12px;
        padding: 30px;
        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.05);
    }

    .checkout-title {
        font-size: 24px;
        font-weight: 700;
        margin-bottom: 20px;
        color: #1c1c1c;
    }

    .customer-name {
        font-size: 16px;
        color: #555;
        margin-bottom: 10px;
    }

    .summary-title {
        font-size: 18px;
        font-weight: 600;
        margin-top: 20px;
        margin-bottom: 10px;
        color: #1c1c1c;
    }

    .product-item {
        display: flex;
        justify-content: space-between;
        padding: 10px 0;
        border-bottom: 1px solid #f0f0f0;
        font-size: 15px;
    }

    .total-line {
        display: flex;
        justify-content: space-between;
        font-weight: 600;
        padding: 12px 0;
        font-size: 16px;
    }

    .pay-btn {
        width: 100%;
        margin-top: 30px;
        border-radius: 8px;
        overflow: hidden;
    }

    .razorpay-payment-button {
        background-color: #ff4d4d !important;
        color: white !important;
        padding: 12px 0 !important;
        font-size: 16px !important;
        border: none !important;
        border-radius: 8px !important;
        width: 100% !important;
        cursor: pointer;
    }
</style>

<div class="checkout-container">
    <h2 class="checkout-title">Checkout</h2>

    <p class="customer-name"><strong>Customer:</strong> {{ customer.name }}</p>

    <h3 class="summary-title">Order Summary</h3>

    <div>
        {% for item in products %}
        <div class="product-item">
            <span>{{ item.product.product_name }} (x{{ item.quantity }})</span>
            <span>₹{{ item.product.product_price }}</span>
        </div>
        {% endfor %}
        <div class="product-item">
            <span>Shipping</span>
            <span>₹40</span>
        </div>
        <div class="total-line">
            <span>Total</span>
            <span>₹{{ amount }}</span>
        </div>
    </div>

    <form method="POST" action="/payment-success/" id="razorpay-form" class="pay-btn">
        {% csrf_token %}
        <script
            src="https://checkout.razorpay.com/v1/checkout.js"
            data-key="{{ razorpay_key_id }}"
            data-amount="{{ amount|floatformat:2|stringformat:'d' }}00"
            data-currency="INR"
            data-order_id="{{ razorpay_order_id }}"
            data-buttontext="Pay Now"
            data-name="College Shop"
            data-description="Order Payment"
            data-theme.color="#ff4d4d">
        </script>
        <input type="hidden" name="order_id" value="{{ order.id }}">
    </form>
</div>

{% endblock %}
